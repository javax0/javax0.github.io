<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Use copy paste programming! | Java Deep, mostly Java</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Use copy paste programming!" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1. Copy paste is bad" />
<meta property="og:description" content="1. Copy paste is bad" />
<link rel="canonical" href="http://localhost:4000/2015/01/14/use-copy-paste-programming.html" />
<meta property="og:url" content="http://localhost:4000/2015/01/14/use-copy-paste-programming.html" />
<meta property="og:site_name" content="Java Deep, mostly Java" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-01-14T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Use copy paste programming!" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2015-01-14T00:00:00+01:00","datePublished":"2015-01-14T00:00:00+01:00","description":"1. Copy paste is bad","headline":"Use copy paste programming!","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2015/01/14/use-copy-paste-programming.html"},"url":"http://localhost:4000/2015/01/14/use-copy-paste-programming.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Java Deep, mostly Java" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Java Deep, mostly Java</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/about/">About</a><a class="page-link" href="/">Java Deep</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Use copy paste programming!</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2015-01-14T00:00:00+01:00" itemprop="datePublished">Jan 14, 2015
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div class="sect1">
<h2 id="1-copy-paste-is-bad">1. Copy paste is bad</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We hate copy paste. Why? Because the result code is unmaintainable. I get a bug reported from QA, I analyze the code, look at logs, debug, drink a lot of coffee and finally I get to the code that is the root cause of the bug. I fix it, test the use case, release new code to learn next day that a very similar bug appears in a similar use case. In that case a different code runs looking very similar to the one I was mending the day before and I just start to wonder how many more copies of the same code will I face and have to change.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-there-are-things-worse-than-copy-paste">2. There are things worse than copy paste</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now imagine a schnitt, like in movies. Let&#8217;s jump to another time. I get a bug reported from QA, I analyze the code. I do not understand. There are a lot of small interfaces, abstract classes, deep hierarchies. Many of the classes have no direct relation to business. I ask for help from the developer who created the code, and he starts to explain. In two days I start to understand his idea of coding structure and how he was implementing the code in a strict object oriented way, avoiding the slightest copy/paste. After three days I find the place where a single line has to be modified. Before doing that I plan to create the unit test to fail first, then fix the code and re-run the unit test to see that the same error never comes again. So I open the unit test class testing the one I am going to modify and I do not understand how it works. It is complex and extends another class that uses another and another. This time it is a bit easier to understand since I already know the mindset of the programmer, who created it but it is still a whole day to create the new test. We are already in day #4 following the bug report customers banging on the door for fix.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="3-to-copy-or-not-to-copy">3. To copy or not to copy&#8230;&#8203;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Which is the better approach? Have some copy paste and face that some of the bugs will just appear in other areas or have an extremely strict but deep hierarchy OO design in the code that avoids bug reappearing but has a steep learning curve?</p>
</div>
<div class="paragraph">
<p>There is no one and only one best ever answer for this question. Neither of them is a good approach. Sometimes some copy paste may be forgivable sin. Deep inheritance structure is difficult to understand. It is usually recommended not to have more than three levels. One may also argue that in the above example the code could have been created with less levels of inheritance without actual copy paste. (Except that the above is not an actual but an imagined example distilled from many years of experience.) The level of repetition may conflict with OO structure. When you have the OO structure you make abstraction. Abstract code is harder to understand. When you copy-paste-modify the modified code will be on the same abstraction level as the one you copied. It may be easier to understand.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="4-copy-unit-test-code">4. Copy unit test code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When it is about unit tests, I tend to forgive copy paste and verbosity to get simpler structures and readability. But that is because unit tests are more documentation than code. They have to be expressive as you look at it immediately. It should not require investigation and understanding of code structures defined somewhere else to get the point what the test is doing. I tend to agree with a unit test that copies one test and then contains slightly modified code. It still has one of the drawbacks on maintenance: if you change the code the change has to be propagated to all other places as well where the code was copied. But in this case if you forget to propagate the change you will get test errors or failures. This way you can see copy paste as an advantage: when you change the code you are forced to look at, refactor and think through all the test cases that are affected.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="5-do-not-copy-production-code">5. Do not copy production code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These effects that turn drawbacks to advantages in case unit test code may become a nightmare in production code. If you have doubt then do not copy. Do not be afraid to create too steep hierarchy structure. Programmers fall more often into the copy-paste trap than into steep hierarchies. Unless you are a senior programmer I recommend that you avoid copy-paste in production code at all costs as a rule of thumb. If you are senior you do not need my recommendation: you will avoid copy-paste on your own.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="6-side-note">6. Side note</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Just a story: <em>Some time ago I wrote some mail about copy-paste in a code and I created a typo writing copy-pasta. In a few minutes I got a reply: "Pasta? You are referring to spaghetti code?" Nomen est omen.</em></p>
</div>
<div class="sect2">
<h3 id="comments-imported-from-wordpress">Comments imported from Wordpress</h3>
<div class="paragraph">
<p><strong>szjanihu</strong> 2015-01-14 21:16:21</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>I think intention is the keyword. If there are two places where you can use the same code, but they are completely independent and may differ in the future, then copy&amp;paste not just allowed but a must. Otherwise, if they are related things and a business rule says the same logic must be used there, then the same code have to be used.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Ott칩 Tak치cs</strong> 2015-01-15 10:52:24</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The article is both good and wrong.</p>
</div>
<div class="paragraph">
<p>It is all about compromise to resolve contradicting concepts: DRY and decoupling</p>
</div>
<div class="paragraph">
<p>copy paste is 100% decoupled and 0% DRY
fully reused code is 100% DRY and 0% decoupled.</p>
</div>
<div class="paragraph">
<p>It is all about compromise.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Martin Grajcar</strong> 2015-01-14 16:48:28</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Isn&#8217;t copy-pasta the result of copy-pasting spaghetti code? ;)</p>
</div>
<div class="paragraph">
<p>Worse than plain copy-paste is copy-paste-modify, where you end up with tons of similar but somehow differing code. When you understand one occurrence, you may think that the others will be easy, but they&#8217;re not. To make it really evil, the differences are numerous and most of them were created by editing different occurrences in a different way for no reason, but some are important. So you have to deal with more code which is resistant to any unification attempt as you can be never sure why it differs.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>G치bor Lipt치k</strong> 2015-02-20 10:36:24</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Steep hierarchies can be avoided in a lot of cases with preferring composition over inheritance. Unit tests "might" contain copy pasted code, since they should test a unit. If I have a super class for test cases, then I introduce an unwanted dependency between my tests. This case I think copy pasting test code is really better.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Do not unit test bugs | Java Deep</strong> 2015-02-04 16:00:31</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>[&#8230;] Why something would be good in unit testing when this is not good in programming. One thing is that it is not always the way like that, and the other is that the same mistake may not be so obvious when we create unit [&#8230;]</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Peter</strong> 2015-01-25 22:35:24</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Sometimes when I watch people working, I think the copy-paste shortcut was invented by the devil.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>


<!-- Disqus comments section goes here (if comments are enabled) -->

<hr/>
<h1>Comments</h1>
<p>Please leave your comments using Disqus, or just press one of the happy faces.
If for any reason you do not want to leave a comment here, <a href="https://github.com/javax0/javax0.github.io/issues">you can still create a Github ticket</a>.</p>
<div class="comments">
    <div id="disqus_thread"></div>

    <script type="text/javascript">

        /* * * STOP! * * */
        /* You shouldn't need to edit ANYTHING below to get this working! */
        /* Instead, edit the key `disqus.shortname` in _config.yml */

        var disqus_config = function (){
            this.page.url = 'http://localhost:4000/2015/01/14/use-copy-paste-programming.html';
            this.page.identifier = '/2015/01/14/use-copy-paste-programming.html';
        };

        (function() {
            var d = document, s = d.createElement('script');
            s.type = 'text/javascript'; s.async = true;
            s.src = 'https://javax0.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();

    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>




  </div><a class="u-url" href="/2015/01/14/use-copy-paste-programming.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Java Deep, mostly Java</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Java Deep, mostly Java</li><li><a class="u-email" href="mailto:peter@verhas.com">peter@verhas.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/verhas"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">verhas</span></a></li><li><a href="https://www.twitter.com/verhas"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">verhas</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>javax0 is a technical Java oriented blog. Whenever I find something interesting, in the mood and feel the power to publish it, you will get it here. Publications are usually released on Wednesday 15:00am GMT. Earlier posts of the blog were published on Javax0 Wordpress Site at https://javax0.wordpress.com</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
